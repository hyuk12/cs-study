# 컴퓨터의 구성

---

컴퓨터의 구성에 대해 알아봅시다. <br>
컴퓨터의 시스템은 크게 하드웨어와 소프트웨어로 나누어집니다.

- 하드웨어: 컴퓨터를 구성하는 기계적 장치
- 소프트웨어: 하드웨어의 동작을 지시하고 제어하는 명령어 집합


하드웨어
---
---
- 중앙처리장치(CPU)
- 기억장치: RAM, HDD, SSD
- 입출력 장치: 마우스, 프린터등

<br>

![하드웨어.drawio.svg](https://github.com/hyuk12/cs-study/blob/main/image/하드웨어.drawio.svg)


> 하드웨어의 모습입니다. <br>
> 하드웨어는 CPU 와 기억장치, 입출력장치로 이루어져 있습니다. <br>
> 이들은 시스템 버스로 연결되어 있습니다. 그리고 이 시스템 버스는 데이터와 명령제어 신호를 각 장치로 실어나릅니다.

## 중앙처리장치 (CPU)
- 사람으로 친다면 뇌에 해당하는 부분입니다.
- 주 기억장치에서 프로그램의 명령어와 데이터를 읽어와 처리합니다.
- 명령어의 수행 순서를 제어합니다.
- 중앙처리장치는 비교와 연산을 담당하는 산술논리연장치 (ALU) 와 명령어의 해석을 담당하는 제어장치, 속도가 빠른 데이터 기억저장소 레지스터로 이루어짐.
- 개인용 컴퓨터와 같은 소형 컴퓨터에서는 CPU를 마이크로프로세라고 부르기도 합니다.

## 기억장치
- 프로그램, 데이터, 연산의 중간 결과를 저장하는 장치
- 주기억장치와 보조기억장치로 나누어진다. RAM 과 ROM은 주기억장치에 해당한다.
- 주기억장치는 실행중인 프로그램과 같은 프로그램에 필요한 데이터를 일시적으로 저장한다.
- 보조기억장치에는 HDD, SSD등이 있고 주기억장치에 비해 속도는 느리지만 영구적으로 많은 자료를 저장할 수 있는 장점이 있다.

## 입출력장치
- 입력과 출력으로 나누어진다.
- 입력 장치는 컴퓨터 내부로 자료를 입력하는 장치 (키보드, 마우스 등)
- 출력 장치는 컴퓨터에서 외부로 자료를 표현하는 장치 (프린터, 모니터, 스피커 등)

## 시스템 버스
> 하드웨어 구성 요소를 물리적으로 연결하는 선

각 구성요소가 다른 구성요소로 데이터를 보낼 수 있게 통로가 되어준다. <br>
용도에 따라서 **데이터 버스, 주소 버스, 제어 버스**로 이루어져 있습니다.

### 데이터 버스
~~~
중앙처리장치와 기타 장치 사이에서 데이터를 전달하는 통로이다.
기억장치와 입출력장치의 명령어와 데이터를 중앙처리장치로 보내거나, 중앙처리장치의 연산결과를 
기억장치와 입출력장치로 보내는 '양방향' 버스입니다.
~~~

### 주소 버스
~~~
데이터를 정확히 실어나르기 위해서는 기억장치의 주소를 정해주어야합니다.
주소버스는 중앙처리장치가 주기억장치나 입출력장치로 기억장치 주소를 전달하는 통로이기에 '단방향' 버스입니다.
~~~

### 제어 버스
~~~
주소 버스와 데이터 버스는 모든 장치에서 공유되기 때문에 이를 제어할 수단이 필요합니다.
제어 버스는 중앙처리장가 기억장치나 입출력장에 제어 신호를 전달하는 통로이다.

제어 신호의 종류로는 다음과 같이 있다.
기억장치 읽기 및 쓰기, 버스 요청 및 승인, 인터럽트 요청 및 승인, 클락 , 리셋등
제어버스는 읽기 동작과 쓰기 동작을 모두 수행하기 때문에 '양방향'버스입니다.

컴퓨터는 기본적으로 읽고 처리한 뒤 저장하는 과정으로 이루어진다.
(READ -> PROCESS -> WRITE)

이 과정을 진행하면서 끊임없이 주 기억장치(RAM)과 소통한다. 이때 운영체제가 64bit라면, CPU는
RAM으로부터 데이터를 한번에 64비트씩 읽어온다.
~~~

중앙처리장치(CPU) 작동 원리
---
---
컴퓨터에서 가장 핵심적인 역할을 수행하는 부분으로 **인간의 두뇌**와 같은 곳이다. <br>
크게 연산장치, 제어장치, 레지스터 3가지로 구성되어 있다.

- 연산 장치
    ~~~
    산술 연산과 논리 연산의 수행 (따라서 산술논리연산장치라고 불리기도한다.)
    연산에 필요한 데이터를 레지스터에서 가져오고, 연산 결과를 다시 레지스터로 보낸다. 
    ~~~
  
- 제어 장치
    ~~~
    명령어를 순서대로 실행할 수 있도록 제어하는 장치
    주 기억장치에서 프로그램 명령어를 꺼내 해독하고, 그 결과에 따라 
    명령어 실행에 필요한 제어 신호를 기억장치, 연산장치, 입출력장치로 보낸다.
    또한 이들 장치가 보낸 신호를 받아, 다음에 수행할 동작을 결정한다.  
    ~~~
  
- 레지스터
    ~~~
    고속 기억장치이다.
    명령어 주소, 연산에 필요한 데이터, 연산 결과 등을 임시로 저장한다.
    
    용도에 따라 범용 레지스터와 특수목적 레지스터로 구분된다.
    중앙처리장치 종류에 따라 사용할 수 있는 레지스터 개수와 크기가 다르다.
    ~~~
    - 범용 레지스터: 연산에 필요한 데이터나 연산 결과를 임시로 저장
    - 특수목적 레지스터: 특별한 용도로 사용하는 레지스터

## 특수 목적 레지스터 중 중요한 것들
- MAR (메모리 주소 레지스터): 읽기와 쓰기 연산을 수행 할 주 기억장치 주소저장
- PC (프로그램 카운터): 다음에 수행할 명령어 주소 저장
- IR (명령어 레지스터): 현재 실행 중인 명령어 저장
- MBR (메모리 버퍼 레지스터): 주 기억장치에서 읽어온 데이터 or 저장할 데이터 임시 저장
- AC (누산기): 연산 결과 임시 저장

## CPU의 동작 과정
1. 주 기억장치는 입력장치에서 입력받은 데이터 또는 보조기억장치에 저장된 프로그램을 읽어온다.
2. CPU는 프로그램을 실행하기 위해서 주기억장치에 저장된 프로그램 명령어와 데이터를 읽어와 처리를 하고 결과를 다시 주 기억장치에 저장 
3. 주 기억장치는 처리 결과를 보조기억장치에 저장하거나 출력장치로 보냄
4. 제어장치는 1 ~ 3 과정에서 명령어가 순서대로 실행되도록 각 장치를 제어

    ### 멍령어 세트란?
    **CPU가 실행할 명령어의 집합**
    > 연산 코드(Operation Code) + 피연산자(Operand)로 이루어짐 <br>
연산 코드: 실행할 연산 <br>
피연산자: 필요한 데이터 or 저장 위치
   
- 연산 코드는 연산, 제어, 데이터 전달, 입출력 기능을 가진다.
- 피연산자는 주소, 숫자/문자, 논리 데이터 등을 저장
- CPU는 프로그램을 실행하기 위해 주기억장치에서 명령어를 순차적으로 인출하여 해독하고 실행하는 과정을 반복함.
- CPU가 주기억장치에서 한번에 하나의 명령어를 인출하여 실행하는데 필요한 일련의 활동을 '명령어 사이클' 이라고 말함
- 명령어 사이클은 인출/실행/간접/인터럽트 사이클로 나누어진다.
- 주기억장치의 지정된 주소에서 하나의 명령어를 가져오고, 실행 사이클 에서는 명령어를 실행한다.
- 하나의 명령어 실행이 완료되면 다음 명령어에 대한 인출 사이클 시작.

    ### 인출 사이클과 실행 사이클에 의한 명령어 처리 과정
    > 인출 사이클에서 가장 중요한 부분은 PC(프로그램 카운터) 값 증가

- PC에 저장된 주소를 MAR로 전달
- 저장된 내용을 토대로 주기억장치의 해당 주소에서 명령어 인출
- 인출한 명령어를 MBR에 저장
- 다음 명령어를 인출하기 위해 PC 값 증가시킴
- 메모리 버퍼 레지스터(MBR)에 저장된 내용을 명령어 레지스터(IR)에 전달

```
T0 : MAR <- PC
T1 : MBR <- M[MAR], PC <- PC + 1
T2 : IR <- MBR
```
여기 까지는 인출하기까지의 과정

**인출한 이후, 명령어를 실행하는 과정**
> ADD addr 명령어 연산

```
T0 : MAR <- IR(Addr)
T1 : MBR <- M[MAR]
T2 : AC <- AC + MBR
```

이미 인출이 진행되고 명령어만 실행하면 되기 때문에 PC를 증가할 필요는 없다. <br>
IR에 MBR의 값이 이미 저장된 상태를 의미한다. <br>
따라서 AC에 MBR을 더 해주기만 하면된다.

소프트웨어
---
---
- 시스템 소프트웨어: 운영체제, 컴파일러
- 응용 소프트웨어: 워드프로세서, 스프레드시트등
